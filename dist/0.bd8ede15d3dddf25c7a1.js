webpackJsonp([0],{"./js/components/UI/ecosystems/BaseFundingModal.js":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("../node_modules/react/index.js"),o=a(r),s=n("../node_modules/prop-types/index.js"),i=a(s),l=n("../node_modules/pcln-design-system/dist/index.js"),u=n("./js/components/UI/atoms/index.js"),d=n("./js/components/UI/atoms/StyledModal.js"),c=n("./js/components/UI/molecules/index.js"),m=n("./js/components/UI/organisms/index.js"),f=n("./js/util/util.js"),p=function(e){return o.default.createElement(l.Flex,{p:2,flexDirection:"column",justify:"center",alignItems:"center",style:{height:"100%"}},o.default.createElement(u.CloseButton,{onClick:function(t){return e.onClose(t)}}),o.default.createElement(l.Flex,{justify:"center",alignItems:"center"},e.isAttemptingFunding?o.default.createElement(c.FundingConfirmationDisplay,null):o.default.createElement(m.BaseFundingForm,{paymentButtonText:"Pay Securely with "+("naira"===e.fundingMethod?"Paystack":"Steemconnect"),onFundingSubmit:function(t){return e.onFundingSubmit(t)},fundingMethod:e.fundingMethod,fundingMethodDisplayName:(0,f.toTitleCase)(e.fundingMethod),onSetFundingAmount:function(t){return e.onSetFundingAmount(t)},onSetFundingMethod:function(t){return e.onSetFundingMethod(t)},value:e.fundingAmount,isFundingInputFocused:e.isFundingModalOpen})))},y=function(e){return e.isFullscreenModal?o.default.createElement(d.StyledFullscreenModal,{pose:e.isFundingModalOpen?"fullscreen":"idle",style:{display:e.isFundingModalOpen?"block":"none"}},o.default.createElement(p,e)):o.default.createElement(u.StyledModal,{pose:e.isFundingModalOpen?"fullscreen":"idle",style:{display:e.isFundingModalOpen?"block":"none"}},o.default.createElement(p,e))};y.propTypes={isFundingModalOpen:i.default.bool,isFullscreenModal:i.default.bool},y.defaultProps={isFundingModalOpen:!1,isFullscreenModal:!1},t.default=y},"./js/components/UI/ecosystems/CartModal.js":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("../node_modules/react/index.js"),o=a(r),s=n("../node_modules/prop-types/index.js"),i=a(s),l=n("../node_modules/pcln-design-system/dist/index.js"),u=n("./js/components/UI/atoms/index.js"),d=n("./js/containers/feed/index.js"),c=a(d),m=function(e){return o.default.createElement(u.StyledModal,{pose:e.isCartModalOpen?"fullscreen":"idle",style:{display:e.isCartModalOpen?"block":"none"}},o.default.createElement(l.Flex,{alignItems:"center",justify:"center"},o.default.createElement(l.Flex,{p:2,flexDirection:"column",width:[1,.9,.7,.7]},o.default.createElement(l.Flex,{mb:2},o.default.createElement(l.Text,{fontSize:3,bold:!0,style:{flex:.999}},e.cartItems.length-1+" More",e.cartItems.length-1==1?" Treat":" Treats"),o.default.createElement(l.IconButton,{size:32,color:"#999",borderColor:"transparent",name:"close",onClick:function(t){return e.onSetCartModalStatus(!1)}})),o.default.createElement(l.Flex,{flexDirection:"column"},o.default.createElement(c.default,{items:e.cartItems,highlightSelectedItem:!1})))))};m.propTypes={isCartModalOpen:i.default.bool,cartItems:i.default.array},m.defaultProps={isCartModalOpen:!1,cartItems:[]},t.default=m},"./js/components/UI/ecosystems/CheckoutInfo.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=n("../node_modules/react/index.js"),o=function(e){return e&&e.__esModule?e:{default:e}}(r),s=n("./js/components/UI/organisms/index.js"),i=n("../node_modules/pcln-design-system/dist/index.js"),l=function(e){return o.default.createElement(i.Flex,a({flexDirection:"column"},e),o.default.createElement(i.Heading,{fontSize:2,mb:1,bold:!0},"Complete Checkout"),o.default.createElement(i.Text,{fontSize:1,mb:3,color:"gray"},"Your last step. We promise."),o.default.createElement(i.Box,{mb:3},o.default.createElement(s.AddressInputCard,{userAddresses:e.userAddresses,address:e.address,isAddressEditable:e.isAddressEditable,isAddressInputDisabled:e.isAddressInputDisabled,onSetAddress:e.onSetAddress,onSetAddressInputDisabled:function(t){return e.onSetAddressInputDisabled(t)}})),e.isUserAuthenticated?o.default.createElement(i.Box,null,o.default.createElement(i.Box,{mb:3},o.default.createElement(s.PaymentCard,e)),o.default.createElement(i.Box,{mb:3},o.default.createElement(s.PaymentModeCard,e))):o.default.createElement(i.Box,{mb:3},o.default.createElement(s.AuthCard,e)))};t.default=l},"./js/components/UI/ecosystems/OrderSuccessModal.js":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("../node_modules/react/index.js"),o=a(r),s=n("../node_modules/prop-types/index.js"),i=(a(s),n("../node_modules/pcln-design-system/dist/index.js")),l=n("./js/components/UI/atoms/StyledModal.js"),u=a(l),d=function(e){return o.default.createElement(u.default,{pose:e.isModalOpen?"fullscreen":"idle",style:{display:e.isModalOpen?"block":"none"}},o.default.createElement(i.Flex,{p:2,flexDirection:"column",justify:"center",alignItems:"center",style:{height:"100%"}},o.default.createElement(i.Box,{mb:2},o.default.createElement(i.Text,{align:"center",fontSize:3,bold:!0},"Order Placed Successfully."),o.default.createElement(i.Text.p,{align:"center",fontSize:3},"You successfully placed an order with code  ",o.default.createElement("b",null,e.placementCode),".")),o.default.createElement(i.Flex,{justify:"center"},o.default.createElement(i.Button,{onClick:function(t){return e.onViewActiveOrders(t)}},"View Active Orders"))))};t.default=d},"./js/components/UI/ecosystems/Summary.js":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=n("../node_modules/react/index.js"),s=a(o),i=n("../node_modules/prop-types/index.js"),l=a(i),u=n("../node_modules/pcln-design-system/dist/index.js"),d=n("./js/components/UI/molecules/index.js"),c=n("./js/util/util.js"),m=function(e){return s.default.createElement(u.Flex,r({flexDirection:"column"},e),s.default.createElement(d.CardHeading,{title:"Summary",onToggleClick:e.onSummaryToggleClick,isMinimized:e.isMinimized,expandLabel:"More Details",shrinkLabel:"Less Details"}),s.default.createElement(u.Flex,{flexDirection:"column",style:{height:e.isMinimized?0:"80px",overflowY:"hidden",transition:"height 0.3s ease-in-out"}},s.default.createElement(u.Flex,{mb:2},s.default.createElement(u.Text,{fontSize:1,regular:!0},"Subtotal"),s.default.createElement(u.Text,{color:"gray",ml:"auto",fontSize:1,regular:!0},e.subtotal)),s.default.createElement(u.Flex,{mb:2},s.default.createElement(u.Text,{fontSize:1,regular:!0},"VAT"),s.default.createElement(u.Text,{color:"gray",ml:"auto",fontSize:1,regular:!0},e.vat)),s.default.createElement(u.Flex,{mb:3},s.default.createElement(u.Text,{fontSize:1,regular:!0},"Service fee"),s.default.createElement(u.Text,{color:"gray",ml:"auto",fontSize:1,regular:!0},e.charge))),s.default.createElement(u.Flex,null,s.default.createElement(u.Text,{color:"gray",fontSize:1,bold:!0},"Total"),s.default.createElement(u.Text,{ml:"auto",fontSize:1,bold:!0},"naira"===e.paymentMethod&&"N",(0,c.roundToDecimalPlaces)(e.total),"naira"!==e.paymentMethod&&" "+e.paymentMethod)))};m.propTypes={isMinimized:l.default.bool,onSummaryToggleClick:l.default.func},m.defaultProps={isMinimized:!0},t.default=m},"./js/components/UI/ecosystems/index.js":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Summary=t.OrderSuccessModal=t.CheckoutInfo=t.CartModal=t.BaseFundingModal=void 0;var r=n("./js/components/UI/ecosystems/BaseFundingModal.js"),o=a(r),s=n("./js/components/UI/ecosystems/CartModal.js"),i=a(s),l=n("./js/components/UI/ecosystems/CheckoutInfo.js"),u=a(l),d=n("./js/components/UI/ecosystems/OrderSuccessModal.js"),c=a(d),m=n("./js/components/UI/ecosystems/Summary.js"),f=a(m);t.BaseFundingModal=o.default,t.CartModal=i.default,t.CheckoutInfo=u.default,t.OrderSuccessModal=c.default,t.Summary=f.default},"./js/components/UI/organisms/AddressInputCard.js":function(e,t,n){"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var r=n("../node_modules/react/index.js"),o=function(e){return e&&e.__esModule?e:{default:e}}(r),s=n("../node_modules/pcln-design-system/dist/index.js"),i=n("./js/components/UI/atoms/index.js"),l=n("./js/components/UI/molecules/index.js"),u=function(e){var t;return o.default.createElement(s.Card,{bg:"lightGray"},o.default.createElement(s.Box,{pt:2,pb:3,px:3},o.default.createElement(s.Flex,null,o.default.createElement(s.Flex,{style:{flex:4}},o.default.createElement(s.Text,{fontSize:2,bold:!0},e.cardTitle)),e.isAddressEditable&&o.default.createElement(s.Flex,{onClick:e.onSummaryToggleClick},o.default.createElement(s.Flex,{flexDirection:"column",justify:"center"},o.default.createElement(s.Icon,{mr:1,size:12,name:"modeEdit",color:"blue"})),o.default.createElement(s.Flex,{flexDirection:"column",justify:"center"},o.default.createElement(s.Link,{onClick:function(t){t.preventDefault(),e.onSetAddressInputDisabled(!1)},mr:1,color:"blue",fontSize:0},o.default.createElement(s.Text,{fontSize:0},"Change Address"))))),e.hasHint&&o.default.createElement(s.Flex,{mb:2},o.default.createElement(s.Text,{color:"gray",fontSize:0},"A correct address means faster delivery.")),e.userAddresses&&e.userAddresses.length>0?o.default.createElement(s.Box,null,o.default.createElement(l.AutocompleteAddressInput,e)):o.default.createElement(s.Box,null,o.default.createElement(i.Input,(t={id:"address",style:{background:"#fff"},onFocus:function(e){return e.target.select()},autoFocus:!0,autocomplete:"on",placeholder:"Example: Room 2, Cali Villa, Alaska",value:e.address,onChange:function(t){e.onSetAddress(t.target.value)}},a(t,"style",{backgroundColor:e.isAddressInputDisabled?"#eee":"#fff",color:"#999"}),a(t,"disabled",e.isAddressInputDisabled),a(t,"onBlur",function(t){return e.onSetAddressInputDisabled(!0)}),t)))))};u.defaultProps={hasHint:!0,isAddressEditable:!0,cardTitle:"Add an address"},t.default=u},"./js/components/UI/organisms/AuthCard.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("../node_modules/react/index.js"),r=function(e){return e&&e.__esModule?e:{default:e}}(a),o=n("../node_modules/pcln-design-system/dist/index.js"),s=n("./js/components/UI/atoms/index.js"),i=(n("./js/components/UI/molecules/index.js"),function(e){return r.default.createElement(o.Card,{bg:"white",py:5},r.default.createElement(o.Flex,{flexDirection:"column"},r.default.createElement(o.Flex,{justify:"center",alignItems:"center"},r.default.createElement(o.Heading,{fontSize:2,bold:!0},"Login or Register to finish this.")),r.default.createElement(o.Flex,{py:2,justify:"center",alignItems:"center"},r.default.createElement(s.OutlineButton,{onClick:function(t){return e.history.push("/login")}},"Login to your account"))))});t.default=i},"./js/components/UI/organisms/BaseFundingForm.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("../node_modules/react/index.js"),r=function(e){return e&&e.__esModule?e:{default:e}}(a),o=n("../node_modules/pcln-design-system/dist/index.js"),s=n("../node_modules/react-spinners/index.js"),i=n("./js/components/UI/atoms/index.js"),l=function(e){return r.default.createElement(o.Box,{width:[.8,.6,.5]},r.default.createElement("form",{method:"get",onSubmit:function(t){t.preventDefault(),e.onFundingSubmit(t)}},r.default.createElement(o.Flex,{flexDirection:"column",justify:"center",alignItems:"center"},r.default.createElement(o.Text,{fontSize:4,mb:3,style:{textAlign:"center"}},"Fund ",r.default.createElement("strong",null,e.fundingMethodDisplayName)," ",r.default.createElement("em",null,"Without Stress"),"."),r.default.createElement(o.Box,{mb:3},r.default.createElement(i.Label,{mb:1,fontSize:0},"Amount"),r.default.createElement(i.Input,{onChange:function(t){e.onSetFundingAmount({fundingAmount:Number(t.target.value)})},value:e.value,type:"number",id:"amount",min:0,step:"any",onFocus:function(e){return e.target.select()},autoFocus:e.isFundingInputFocused,style:{background:"#fff"}})),r.default.createElement(o.Box,{mb:3},r.default.createElement(o.Button,{disabled:e.isAttemptingFunding,type:"submit",fullWidth:!0,mb:1},e.isAttemptingFunding?r.default.createElement(s.SyncLoader,{color:"#f1f1f1",size:10,loading:!0}):r.default.createElement(o.Text,null,e.paymentButtonText)),e.isAttemptingFunding&&r.default.createElement(o.Text,{color:"gray",fontSize:0},"Going to PayStack's secure payment portal within 10s...")))))};l.defaultProps={paymentButtonText:"Pay Securely with SteemConnect"},t.default=l},"./js/components/UI/organisms/CartEmptyState.js":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("../node_modules/react/index.js"),o=a(r),s=n("../node_modules/prop-types/index.js"),i=(a(s),n("../node_modules/pcln-design-system/dist/index.js")),l=n("./js/components/UI/atoms/index.js"),u=function(e){return o.default.createElement(i.Flex,{px:3,flexDirection:"column",justify:"center",style:{height:"80%",position:"absolute",width:"100%"}},o.default.createElement(i.Flex,{flexDirection:"column",justify:"center",alignItems:"center",style:{textAlign:"center"}},o.default.createElement(i.Text,{fontSize:4,mb:3,bold:!0},"Please fill me."),o.default.createElement(i.Text,{mb:3},"Add tons of delightful treats to your cart below."),o.default.createElement(i.Flex,{justify:"center",alignItems:"center"},o.default.createElement(l.OutlineButton,{onClick:function(t){return e.onShowTreatsButtonClick(t)}},"See treats for your cart"))))};t.default=u},"./js/components/UI/organisms/PaymentCard.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("../node_modules/react/index.js"),r=function(e){return e&&e.__esModule?e:{default:e}}(a),o=n("../node_modules/pcln-design-system/dist/index.js"),s=n("./js/components/UI/molecules/index.js"),i=n("./js/util/util.js"),l=function(e){var t=(0,i.roundToDecimalPlaces)(e.getWalletBalance("STEEM"),3),n=(0,i.roundToDecimalPlaces)(e.getWalletBalance("SBD"),3),a=(0,i.roundToDecimalPlaces)(e.getWalletBalance("naira"),3),l=e.rates.STEEM,u=e.rates.SBD,d=a>0,c=t>0,m=n>0;return r.default.createElement(o.Card,{bg:"lightGray"},r.default.createElement(o.Flex,{flexDirection:"column",pt:2,pb:3,px:3},r.default.createElement(s.CardHeading,{title:"Change Pay Method",onToggleClick:e.onPaymentToggleClick,isMinimized:e.isPaymentMinimized}),r.default.createElement(o.Box,{style:{height:e.isPaymentMinimized?"45px":"140px",overflowY:"hidden",transition:"height 0.3s ease-in-out"}},r.default.createElement(s.PaymentChoice,{choice:"naira",isActivePaymentMethod:"naira"===e.activePaymentMethod,message:"Pay N"+(0,i.roundToDecimalPlaces)(e.amount,3)+" Cash",onSetActivePaymentMethod:function(t){return e.onSetActivePaymentMethod("naira")}}),r.default.createElement(s.PaymentChoice,{choice:"STEEM",isActivePaymentMethod:"STEEM"===e.activePaymentMethod,message:"Pay "+(0,i.roundToDecimalPlaces)(e.amount/l,3)+" STEEM",onSetActivePaymentMethod:function(t){return e.onSetActivePaymentMethod("STEEM")}}),r.default.createElement(s.PaymentChoice,{choice:"SBD",isActivePaymentMethod:"SBD"===e.activePaymentMethod,message:"Pay "+(0,i.roundToDecimalPlaces)(e.amount/u,3)+" SBD",onSetActivePaymentMethod:function(t){return e.onSetActivePaymentMethod("SBD")}})),(c||m)&&r.default.createElement(o.Text,{color:"gray",fontSize:0,mb:1},r.default.createElement("b",null,c&&t+" STEEM "),c&&m&&"& ",r.default.createElement("b",null,m&&n+" SBD "),"available in wallet"),d&&r.default.createElement(o.Text,{color:"gray",fontSize:0},"You have ",r.default.createElement("b",null,d&&"NGN "+a," "),"available.")))};t.default=l},"./js/components/UI/organisms/PaymentModeCard.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("../node_modules/react/index.js"),r=function(e){return e&&e.__esModule?e:{default:e}}(a),o=n("../node_modules/pcln-design-system/dist/index.js"),s=n("./js/components/UI/molecules/index.js"),i=n("./js/components/UI/atoms/index.js"),l=function(e){return r.default.createElement(o.Card,{bg:"lightGray"},r.default.createElement(o.Box,{pt:2,pb:3,px:3},r.default.createElement(s.CardHeading,{title:"Payment Mode",onToggleClick:e.onPaymentModeToggleClick,isMinimized:e.isPaymentModeMinimized}),r.default.createElement(o.Box,{style:{height:e.isPaymentModeMinimized?"23px":"65px",overflow:"hidden",transition:"height 0.3s ease-in-out"}},r.default.createElement(i.Label,{regular:!0,fontSize:2},r.default.createElement(o.Flex,null,r.default.createElement(i.Radio,{value:"on-demand",id:"on-demand",name:"payment-mode",onChange:function(t){return e.onSetActivePaymentMode(t.target.value)},checked:"on-demand"===e.activePaymentMode}),r.default.createElement(o.Text,{ml:2},"Pay immediately (on demand)"))),r.default.createElement(i.Label,{htmlFor:"on-delivery",regular:!0,fontSize:2},r.default.createElement(o.Flex,null,r.default.createElement(i.Radio,{value:"on-delivery",id:"on-delivery",name:"payment-mode",onChange:function(t){return e.onSetActivePaymentMode(t.target.value)},checked:"on-delivery"===e.activePaymentMode}),r.default.createElement(o.Text,{ml:2},"Pay later (on delivery)")))),r.default.createElement(o.Flex,null)))};t.default=l},"./js/components/UI/organisms/index.js":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.BaseFundingForm=t.PaymentModeCard=t.PaymentCard=t.CartEmptyState=t.AddressInputCard=t.AuthCard=void 0;var r=n("./js/components/UI/organisms/AddressInputCard.js"),o=a(r),s=n("./js/components/UI/organisms/AuthCard.js"),i=a(s),l=n("./js/components/UI/organisms/CartEmptyState.js"),u=a(l),d=n("./js/components/UI/organisms/PaymentCard.js"),c=a(d),m=n("./js/components/UI/organisms/PaymentModeCard.js"),f=a(m),p=n("./js/components/UI/organisms/BaseFundingForm.js"),y=a(p);t.AuthCard=i.default,t.AddressInputCard=o.default,t.CartEmptyState=u.default,t.PaymentCard=c.default,t.PaymentModeCard=f.default,t.BaseFundingForm=y.default},"./js/screens/cart/index.js":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n("../node_modules/react/index.js"),u=a(l),d=n("../node_modules/prop-types/index.js"),c=(a(d),n("../node_modules/react-redux/es/index.js")),m=n("../node_modules/react-router-dom/es/index.js"),f=n("./js/redux/reducerInjector.js"),p=a(f),y=n("../node_modules/pcln-design-system/dist/index.js"),h=n("./js/components/UI/atoms/index.js"),g=(n("./js/components/UI/molecules/index.js"),n("./js/components/UI/organisms/index.js")),j=n("./js/components/UI/ecosystems/index.js"),v=n("./js/screens/cart/constants.js"),M=n("./js/screens/cart/actions.js"),S=n("./js/screens/account/actions.js"),b=n("./js/screens/checkout/actions.js"),E=n("./js/containers/header/actions.js"),x=n("./js/containers/footer/actions.js"),C=n("./js/containers/feed/index.js"),A=a(C),F=n("./js/containers/app/reducer.js"),P=n("./js/screens/cart/reducer.js"),T=n("./js/screens/account/reducer.js"),_=n("./js/screens/checkout/reducer.js"),I=n("./js/screens/store/reducer.js"),k=n("./js/services/AccountService/index.js"),O=a(k),D=n("./js/services/UserService/index.js"),w=a(D),U=n("./js/services/CheckoutService/index.js"),z=a(U),B=(n("./js/util/util.js"),function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isModalOpen:!1,isSummaryMinimized:!0,paymentMethod:"STEEM",paymentStatusInterval:null,isPaymentMinimized:!0,isPaymentModeMinimized:!0},n.setActivePaymentMethod=n.setActivePaymentMethod.bind(n),n.setActivePaymentMode=n.setActivePaymentMode.bind(n),n.setCurrentDeliveryAddress=n.setCurrentDeliveryAddress.bind(n),n.onFundingSubmit=n.onFundingSubmit.bind(n),n.onCartSubmit=n.onCartSubmit.bind(n),n}return s(t,e),i(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.setHeaderVisibility,a=t.setFooterVisibility,r=t.onLoadCart,o=t.history,s=t.match,i=t.app,l=t.account,u=t.cart,d=(t.location,t.setCartModalStatus),c=t.setFundingModalStatus;setTimeout(function(){n({isHeaderVisible:!1}),a({isFooterVisible:!1})},200),i.url!==s.url&&r(s.path),this.unblock=o.block(function(t){return e.props.cart.isCartModalOpen?(d(!1),!1):!e.props.account.isFundingModalOpen||(c(!1),!1)}),this.userService=new w.default(l.user),this.checkoutService=new z.default(u)}},{key:"componentWillUnmount",value:function(){this.setActivePaymentMethod=null,this.setActivePaymentMode=null,this.setCurrentDeliveryAddress=null,this.paymentStatusInterval=clearInterval(this.paymentStatusInterval),this.onFundingSubmit=null,this.onCartSubmit=null,this.unblock()}},{key:"render",value:function(){var e=this,t=this.props,n=t.app,a=t.account,r=t.cart,o=t.checkout,s=t.history,i=t.setFundingAmount,l=t.setFundingMethod,d=(t.setFundingModalStatus,o.paymentMethod),c=o.paymentMode,m=o.deliveryAddress,f=r.items,p=r.isCartModalOpen,v=a.fundingAmount,M=a.fundingMethod,S=a.isAttemptingFunding,b=a.isFundingModalOpen,E=a.user,x=new z.default(r),C=new w.default(E),F=x.calculateOrderVat(),P=x.calculateOrderCharge(),T=x.calculateOrderSubtotal(),_=x.calculateOrderTotalWithRate(n.rates[d]);return f.length?u.default.createElement(y.Flex,{flexDirection:"column"},u.default.createElement(j.CartModal,{isCartModalOpen:p,cartItems:f,onSetCartModalStatus:function(t){return e.props.setCartModalStatus(t)}}),b&&u.default.createElement(j.BaseFundingModal,{fundingAmount:v,fundingMethod:M,isAttemptingFunding:S,isFundingModalOpen:b,onFundingSubmit:function(t){return e.onFundingSubmit(t)},onSetFundingAmount:function(e){return i(e)},onSetFundingMethod:function(e){i({fundingAmount:_}),l(e)},onClose:function(t){e.props.setFundingModalStatus({isFundingModalOpen:!1}),e.props.setFundingAttemptingStatus({isAttemptingFunding:!1}),e.paymentStatusInterval&&(e.paymentStatusInterval=clearInterval(e.paymentStatusInterval))}}),u.default.createElement(y.Flex,{mt:1,px:3,flexDirection:"column"},u.default.createElement(y.Flex,{alignItems:"center",justify:"center"},u.default.createElement("form",{onSubmit:function(t){return e.onCartSubmit(t)}},u.default.createElement(y.Flex,{style:{display:p||b?"none":"block"},width:[1,.9,.7,.7]},u.default.createElement(y.Flex,{mb:3},u.default.createElement(y.Flex,{style:{flex:2}},u.default.createElement(y.Text,{fontSize:3,mr:2,bold:!0},"My Order"),u.default.createElement(y.Text,{regular:!0,color:"gray",mt:2,fontSize:0},"( ",f.length," ",1==f.length?"Item":"Items"," )")),u.default.createElement(y.Flex,{alignItems:"flex-end",mt:2},u.default.createElement(y.Link,{onClick:function(t){return confirm("Take this action?")&&e.props.clearCart()}},u.default.createElement(y.Text,{fontSize:0},"Clear Order")))),u.default.createElement(A.default,{items:[f[0]]}),f.length>1&&u.default.createElement(y.Flex,{mb:3},u.default.createElement(h.OutlineButton,{py:2,type:"button",onClick:function(t){return e.props.setCartModalStatus(!0)},fullWidth:!0},"See ",f.length-1," more  ",2==f.length?"treat":"treats",".")),u.default.createElement(j.CheckoutInfo,{rates:this.props.app.rates,amount:_,history:s,isUserAuthenticated:null!==E,getWalletBalance:function(e){return C.retrieveWalletBalance(e)},onSetAddress:this.setCurrentDeliveryAddress,address:m,isAddressEditable:!1,userAddresses:null!==E?E.addresses:[],onPaymentToggleClick:function(t){return e.setState({isPaymentMinimized:!e.state.isPaymentMinimized})},onPaymentModeToggleClick:function(t){return e.setState({isPaymentModeMinimized:!e.state.isPaymentModeMinimized})},isPaymentMinimized:this.state.isPaymentMinimized,isPaymentModeMinimized:this.state.isPaymentModeMinimized,onSetActivePaymentMethod:this.setActivePaymentMethod,onSetActivePaymentMode:this.setActivePaymentMode,activePaymentMethod:d,activePaymentMode:c}),u.default.createElement(j.Summary,{onSummaryToggleClick:function(t){return e.setState({isSummaryMinimized:!e.state.isSummaryMinimized})},isMinimized:this.state.isSummaryMinimized,total:_,subtotal:T,paymentMethod:d,vat:F,charge:P,mb:2}),u.default.createElement(y.GreenButton,{disabled:!this.isValidForm(),type:"submit",mb:4,fullWidth:!0},"Complete Checkout")))))):u.default.createElement(g.CartEmptyState,{onShowTreatsButtonClick:function(t){s.push(void 0===e.props.store.activeStore.id?"/store/1":"/store/"+e.props.store.activeStore.id)}})}},{key:"setCurrentDeliveryAddress",value:function(e){this.props.setDeliveryAddress({deliveryAddress:e})}},{key:"setActivePaymentMethod",value:function(e){this.props.setPaymentMethod({paymentMethod:e}),this.props.setFundingMethod({fundingMethod:e}),this.selectPaymentMethodAction(e)}},{key:"setActivePaymentMode",value:function(e){this.props.setPaymentMode({paymentMode:e})}},{key:"selectPaymentMethodAction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=this.props,a=n.app,r=(n.cart,n.checkout),o=n.setPaymentMethod,s=n.setFundingAmount,i=n.setFundingModalStatus,l=r.paymentMode;r.paymentMethod;o({paymentMethod:e});var u=this.checkoutService.calculateOrderTotalWithRate(a.rates[e]),d=this.userService.retrieveWalletBalance(e);if("on-demand"===l){if(d<u)return s({fundingAmount:u}),i({isFundingModalOpen:!0});alert("You're doing great so far. Just tap the checkout button.")}t()}},{key:"onCartSubmit",value:function(e){e.preventDefault();var t=this;this.selectPaymentMethodAction(this.props.checkout.paymentMethod,function(){t.props.history.push("/checkout")})}},{key:"onFundingSubmit",value:function(e){var t=this;e.preventDefault(),O.default.processFundingRequest({account:this.props.account,handleFetchTransactionToken:this.props.fetchTransactionToken,handleSetFundingAttemptingStatus:function(e){return t.props.setFundingAttemptingStatus(e)},handleSetTransactionsCount:function(e){return t.props.setTransactionsCount(e)},handleFetchTransactionsCount:function(e,n){return t.props.fetchTransactionsCount(e,n)},handlesSetUser:function(e){return t.props.setUser(e)},handleSetFundingModalStatus:function(e){return t.props.setFundingModalStatus(e)},handleSetupPaymentStatusInterval:function(e){t.state.paymentStatusInterval=setInterval(function(){e()},2e4)},handleTeardownPaymentStatusInterval:function(){t.state.paymentStatusInterval=clearInterval(t.state.paymentStatusInterval)}})}},{key:"isValidForm",value:function(){return this.props.checkout.deliveryAddress.length>1&&null!==this.props.account.user}}],[{key:"fetchData",value:function(e,t){var n=t.path;return e.dispatch((0,M.fetchCart)(n))}},{key:"getReducer",value:function(){return{key:v.REDUCER_NAME,reducer:P.cartReducer}}}]),t}(u.default.PureComponent)),N=function(e){var t=(0,T.getAccountState)(e).toJS();return{app:(0,F.getAppState)(e).toJS(),cart:(0,P.getCartState)(e).toJS(),store:(0,I.getStoreState)(e).toJS(),checkout:(0,_.getCheckoutState)(e).toJS(),account:t}},R=function(e){return{setHeaderVisibility:function(t){return e((0,E.setHeaderVisibility)(t))},setFooterVisibility:function(t){return e((0,x.setFooterVisibility)(t))},onLoadCart:function(t){return e((0,M.fetchCart)(t))},setCartModalStatus:function(t){return e((0,M.setCartModalStatus)(t))},setFundingModalStatus:function(t){return e((0,S.setFundingModalStatus)(t))},setFundingAmount:function(t){return e((0,S.setFundingAmount)(t))},setFundingMethod:function(t){return e((0,S.setFundingMethod)(t))},setPaymentMethod:function(t){return e((0,b.setPaymentMethod)(t))},setPaymentMode:function(t){return e((0,b.setPaymentMode)(t))},setFundingAttemptingStatus:function(t){return e((0,S.setFundingAttemptingStatus)(t))},fetchTransactionsCount:function(t,n){return e((0,S.fetchTransactionsCount)(t,n))},fetchTransactionToken:function(t){return e((0,S.fetchTransactionToken)(t))},setUser:function(t){return e((0,S.setUser)(t))},setTransactionsCount:function(t){return e((0,S.setTransactionsCount)(t))},setDeliveryAddress:function(t){return e((0,b.setDeliveryAddress)(t))},clearCart:function(t){return e((0,M.clearCart)())}}},V=(0,p.default)(v.REDUCER_NAME,P.cartReducer)(B);t.default=(0,m.withRouter)((0,c.connect)(N,R)(V))},"./js/screens/checkout/actions.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchCheckout=t.setCheckoutStatusModalVisibility=t.setCheckoutAttemptingStatus=t.setDeliveryAddress=t.setPaymentMode=t.setPaymentMethod=t.attemptOrderPlacement=void 0;var a=n("./js/screens/checkout/constants.js"),r=n("../service/service.js"),o=n("./js/services/ApiService/index.js"),s=n("./js/containers/app/actions.js"),i=n("./js/screens/account/actions.js"),l="https://instachaw.com"===window.location.origin?"https://api.instachaw.com":"http://localhost:3333",u=(t.attemptOrderPlacement=function(e,t){return function(n){n(d({isAttemptingCheckout:!0})),(0,o.sendRequest)({endpoint:l+"/api/v1/orders",method:"POST",payload:JSON.stringify(e)}).then(function(e){if(void 0!==e&&null!==e)return n((0,i.addUserOrder)({order:e})),n(d({isAttemptingCheckout:!1})),t(e);setTimeout(function(){n(d({isAttemptingCheckout:!1}))},1e3)}).catch(function(e){return console.log(e)})}},function(e){return{type:a.SET_CHECKOUT,data:e}}),d=(t.setPaymentMethod=function(e){return{type:a.SET_PAYMENT_METHOD,data:e}},t.setPaymentMode=function(e){return{type:a.SET_PAYMENT_MODE,data:e}},t.setDeliveryAddress=function(e){return{type:a.SET_DELIVERY_ADDRESS,data:e}},t.setCheckoutAttemptingStatus=function(e){return{type:a.SET_CHECKOUT_ATTEMPTING_STATUS,data:e}});t.setCheckoutStatusModalVisibility=function(e){return{type:a.SET_CHECKOUT_STATUS,data:e}},t.fetchCheckout=function(e){return function(t){return t((0,s.isLoading)(!0)),(0,r.getPageData)(e).then(function(e){return t((0,s.setMeta)(e.meta)),t((0,s.setUrl)(e.url)),t((0,s.setTitle)(e.title)),e}).then(function(e){t((0,s.isLoading)(!1)),t(u(e))}).catch(function(e){throw console.error(e),e})}}},"./js/services/AccountService/index.js":function(e,t,n){"use strict";function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n("./js/util/util.js"),l="https://instachaw.com"===window.location.origin?"https://api.instachaw.com":"http://localhost:3333",u=function(){function e(){r(this,e)}return s(e,null,[{key:"processFundingRequest",value:function(e){var t=e.account,n=(e.onFetchTransactionToken,e.handleFetchTransactionToken),r=e.handleSetFundingAttemptingStatus,s=e.handleSetTransactionsCount,u=e.handleFetchTransactionsCount,d=e.handlesSetUser,c=e.handleSetFundingModalStatus,m=e.handleSetupPaymentStatusInterval,f=e.handleTeardownPaymentStatusInterval,p=t.fundingMethod,y=t.user,h=(t.transactionsCount,t.fundingAmount),g="https://steemconnect.com/sign/transfer?",j=h+" "+p;"naira"===p&&(g=l+"/initializeTransaction",j=h);var v=window.open("");return n(function(e,t){var n="Add "+h+" "+p+" to the account of "+y.username,M="amt="+h+"&wlt="+p+"&uid="+y.id+"&type=topup&memo="+n+"&tkn="+e,S=l+"/processTransaction?"+M,b="to=instachaw&amount="+j+"&memo="+n+"&redirect_uri="+S;"naira"===p&&(b="?ref="+(0,i.generateTransactionRef)()+"&"+M+"&email="+y.email),v.location=encodeURI((""+g+b).trim()),r({isAttemptingFunding:!0}),s({transactionsCount:t});var E=t;return setTimeout(function(){var e=0;console.log(h),m(function(){e+=1,e>14&&f(),u({userID:y.id},function(e){if(Number(E)<Number(e)){var t=y.wallets.filter(function(e){return e.title!==p}),n=y.wallets.filter(function(e){return e.title===p})[0];n.balance=n.balance+h,t=[].concat(a(t),[n]),localStorage.setItem("user",JSON.stringify(o({},y,{wallets:t}))),d({user:o({},y,{wallets:t})}),c({isFundingModalOpen:!1}),r({isAttemptingFunding:!1}),f()}})})},3e3)})}}]),e}();t.default=u},"./js/services/CheckoutService/index.js":function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n("./js/util/util.js"),s=function(){function e(t){a(this,e),this.cart=t}return r(e,[{key:"generatePlacementCode",value:function(){return Math.random().toFixed(36).replace(/[^0-9]+/g,"").substr(1,3)+"-"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,3).toUpperCase()}},{key:"calculateOrderSubtotal",value:function(){return(0,o.roundToDecimalPlaces)(this.cart.items.reduce(function(e,t){return e+parseFloat(t.price)*parseInt(t.qty,10)},0))}},{key:"calculateOrderVat",value:function(){var e=(0,o.roundToDecimalPlaces)(this.cart.items.reduce(function(e,t){return e+parseFloat(t.vat)*parseInt(t.qty,10)},0));return(0,o.isANumber)(e)?e:0}},{key:"calculateOrderCharge",value:function(){return 300}},{key:"calculateOrderTotal",value:function(){var e=this.calculateOrderVat();return e=(0,o.isANumber)(e)?e:0,this.calculateOrderSubtotal()+e+this.calculateOrderCharge()}},{key:"calculateOrderTotalWithRate",value:function(e){return(0,o.roundToDecimalPlaces)(this.calculateOrderTotal()/e)}}]),e}();t.default=s},"./js/services/UserService/index.js":function(e,t,n){"use strict";function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n("./js/util/util.js"),l=function(){function e(t){r(this,e),this.user=t}return s(e,[{key:"retrieveWallet",value:function(e){return null!==this.user?this.user.wallets.filter(function(t){return t.title===e})[0]:{}}},{key:"retrieveWalletBalance",value:function(e){var t=this.retrieveWallet(e).balance;return(0,i.isANumber)(t)?t:0}},{key:"debitAmountFromWallet",value:function(e,t,n){var r=this.retrieveWallet(e),s=Number(r.balance)-Number(t);r=o({},r,{balance:s});var i=this.user.wallets.filter(function(e){return e.title!==r.title}),l=[].concat(a(i),[r]);localStorage.setItem("user",JSON.stringify(o({},this.user,{wallets:l}))),n(l)}},{key:"hasEmptyAddressBook",value:function(){return 0===this.user.addresses.length}},{key:"hasAddress",value:function(e){return 0!==this.user.addresses.filter(function(t){return t.body===e}).length}},{key:"addToAddressBook",value:function(e,t){var n=this.user.addresses.reduce(function(e,t){return Math.max(e,t.id)+1}),r={id:n,body:e,user_id:this.user.id},s=[].concat(a(this.user.addresses),[r]);localStorage.setItem("user",JSON.stringify(o({},user,{addresses:s}))),t()}}]),e}();t.default=l}});